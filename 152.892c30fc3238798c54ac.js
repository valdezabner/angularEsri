(window.webpackJsonp=window.webpackJsonp||[]).push([[152],{TPT3:function(e,r,t){"use strict";t.r(r),t.d(r,"fromUrl",function(){return c});var n=t("HaE+"),l=t("srIe"),a=t("zlDU"),s=t("4EHJ"),u=t("Lqtk"),i=t("VLTf"),o=t("oLSx");function c(e){return y.apply(this,arguments)}function y(){return(y=Object(n.a)(function*(e){var r;const n=null==(r=e.properties)?void 0:r.customParameters,l=yield f(e.url,n),a={...e.properties,url:e.url};if(!l.sublayerIds)return null!=l.layerOrTableId&&(a.layerId=l.layerOrTableId,a.sourceJSON=l.sourceJSON),new l.Constructor(a);const s=new(0,(yield t.e(35).then(t.bind(null,"VPx4"))).default)({title:l.parsedUrl.title});return p(s,l,a),s})).apply(this,arguments)}function d(e,r){return e?e.find(e=>e.id===r):null}function p(e,r,t){function n(e,n){const a={...t,layerId:e,sublayerTitleMode:"service-name"};return Object(l.i)(n)&&(a.sourceJSON=n),new r.Constructor(a)}r.sublayerIds.forEach(t=>{const l=n(t,d(r.sublayerInfos,t));e.add(l)}),r.tableIds.forEach(t=>{const l=n(t,d(r.tableInfos,t));e.tables.add(l)})}function f(e,r){return b.apply(this,arguments)}function b(){return(b=Object(n.a)(function*(e,r){let t=Object(i.e)(e);if(Object(l.h)(t)&&(t=yield h(e,r)),Object(l.h)(t))throw new a.a("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:e});const{serverType:n,sublayer:s}=t;let u;const o={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"};switch(n){case"MapServer":u=null!=s?"FeatureLayer":w(e,r).then(e=>e?"TileLayer":"MapImageLayer");break;case"ImageServer":u=J(e,r).then(e=>{const r=e.tileInfo&&e.tileInfo.format;return e.tileInfo?!r||"LERC"!==r.toUpperCase()||e.cacheType&&"elevation"!==e.cacheType.toLowerCase()?"ImageryTileLayer":"ElevationLayer":"ImageryLayer"});break;case"SceneServer":u=J(t.url.path,r).then(e=>{const r={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};if(e&&Array.isArray(e.layers)&&e.layers.length>0){const t=e.layers[0].layerType;if(null!=r[t])return r[t]}return"SceneLayer"});break;default:u=o[n]}const c="FeatureServer"===n,y={parsedUrl:t,Constructor:null,layerOrTableId:c?s:null,sublayerIds:null,tableIds:null},d=yield u;if({FeatureLayer:!0,SceneLayer:!0}[d]&&null==s){const t=yield v(e,n,r);if(c&&(y.sublayerInfos=t.layerInfos,y.tableInfos=t.tableInfos),1!==t.layerIds.length+t.tableIds.length)y.sublayerIds=t.layerIds,y.tableIds=t.tableIds;else if(c){var p,f;y.layerOrTableId=null!=(p=t.layerIds[0])?p:t.tableIds[0],y.sourceJSON=null!=(f=t.layerInfos[0])?f:t.tableInfos[0]}}return y.Constructor=yield j(d),y})).apply(this,arguments)}function h(e,r){return I.apply(this,arguments)}function I(){return(I=Object(n.a)(function*(e,r){const t=yield J(e,r);let n=null,a=null;const u=t.type;if("Feature Layer"===u||"Table"===u?(n="FeatureServer",a=t.id):"indexedVector"===u?n="VectorTileServer":t.hasOwnProperty("mapName")?n="MapServer":t.hasOwnProperty("bandCount")&&t.hasOwnProperty("pixelSizeX")?n="ImageServer":t.hasOwnProperty("maxRecordCount")&&t.hasOwnProperty("allowGeometryUpdates")?n="FeatureServer":t.hasOwnProperty("streamUrls")&&(n="StreamServer"),!n)return null;const o=null!=a?Object(i.f)(e):null;return{title:Object(l.i)(o)&&t.name||Object(s.k)(e),serverType:n,sublayer:a,url:{path:Object(l.i)(o)?o.serviceUrl:Object(s.J)(e).path}}})).apply(this,arguments)}function v(e,r,t){return O.apply(this,arguments)}function O(){return(O=Object(n.a)(function*(e,r,t){var n,l;let a,s=!1;if("FeatureServer"===r){const r=yield L(e,t);s=!!r.layersJSON,a=r.layersJSON||r.serviceJSON}else a=yield J(e,t);const u=null==(n=a)?void 0:n.layers,i=null==(l=a)?void 0:l.tables;return{layerIds:(null==u?void 0:u.map(e=>e.id).reverse())||[],tableIds:(null==i?void 0:i.map(e=>e.id).reverse())||[],layerInfos:s?u:[],tableInfos:s?i:[]}})).apply(this,arguments)}function S(e){return!e.type||"Feature Layer"===e.type}function L(e,r){return m.apply(this,arguments)}function m(){return(m=Object(n.a)(function*(e,r){var t,n;let l=yield J(e,r);l=l||{},l.layers=(null==(t=l.layers)?void 0:t.filter(S))||[];const a={serviceJSON:l};if(l.currentVersion<10.5)return a;const s=yield J(e+"/layers",r);return a.layersJSON={layers:(null==s||null==(n=s.layers)?void 0:n.filter(S))||[],tables:(null==s?void 0:s.tables)||[]},a})).apply(this,arguments)}function j(e){return T.apply(this,arguments)}function T(){return(T=Object(n.a)(function*(e){return(0,o.a[e])()})).apply(this,arguments)}function w(e,r){return g.apply(this,arguments)}function g(){return(g=Object(n.a)(function*(e,r){return(yield J(e,r)).tileInfo})).apply(this,arguments)}function J(e,r){return P.apply(this,arguments)}function P(){return(P=Object(n.a)(function*(e,r){return(yield Object(u.default)(e,{responseType:"json",query:{f:"json",...r}})).data})).apply(this,arguments)}}}]);