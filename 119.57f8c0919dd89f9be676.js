(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{"9fxc":function(e,t,r){"use strict";r.r(t);var i,n=r("HaE+"),s=r("pO5D"),l=(r("wSAH"),r("srIe")),a=(r("6S2I"),r("zqDF")),o=r("WbKI"),u=r("r88o"),b=r("04ZG"),c=r("Cduq"),h=r("4EHJ"),y=(r("ju1D"),r("9AIY"),r("WZb1")),p=r("OvF4"),d=(r("4GrV"),r("LE9a")),O=r("TRCY"),j=r("pqNC"),f=r("5pQd"),v=r("IvSi"),m=r("uRH/"),g=r("mXvl"),S=r("DbUH"),M=r("jhcG"),w=r("WmKv"),x=r("BGvB"),E=r("s7YA"),_=r("Gj5k"),I=r("ag7Y"),k=r("zm0L"),F=r("bV/r"),L=r("N5XI");let N=i=class extends(k.a.EventedMixin(Object(I.b)(F.a))){constructor(){super(...arguments),this._sublayersHandles=null,this.description=null,this.id=null,this.networkLink=null,this.title=null,this.sourceJSON=null,this.fullExtent=null}initialize(){Object(L.j)(this,"networkLink").then(()=>Object(L.l)(this,"visible")).then(()=>this.load())}load(e){if(!this.networkLink)return;if(this.networkLink.viewFormat)return;const t=Object(l.i)(e)?e.signal:null,r=this._fetchService(this._get("networkLink").href,t).then(e=>{const t=Object(x.a)(e.sublayers);this.fullExtent=p.a.fromJSON(t),this.sourceJSON=e;const r=Object(a.m)(d.a.ofType(i),Object(x.e)(i,e));this.sublayers?this.sublayers.addMany(r):this.sublayers=r,this.layer.emit("sublayer-update"),this.layer&&this.layer.notifyChange("visibleSublayers")});return this.addResolvingPromise(r),Promise.resolve(this)}set sublayers(e){const t=this._get("sublayers");t&&(t.forEach(e=>{e.parent=null,e.layer=null}),this._sublayersHandles.forEach(e=>e.remove()),this._sublayersHandles=null),e&&(e.forEach(e=>{e.parent=this,e.layer=this.layer}),this._sublayersHandles=[e.on("after-add",({item:e})=>{e.parent=this,e.layer=this.layer}),e.on("after-remove",({item:e})=>{e.parent=null,e.layer=null})]),this._set("sublayers",e)}castSublayers(e){return Object(a.m)(d.a.ofType(i),e)}get visible(){return this._get("visible")}set visible(e){this._get("visible")!==e&&(this._set("visible",e),this.layer&&this.layer.notifyChange("visibleSublayers"))}readVisible(e,t){return!!t.visibility}set layer(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach(t=>t.layer=e)}_fetchService(e,t){return Object(x.b)(e,this.layer.outSpatialReference,this.layer.refreshInterval,t).then(e=>Object(x.d)(e.data))}};Object(s.a)([Object(o.b)()],N.prototype,"description",void 0),Object(s.a)([Object(o.b)()],N.prototype,"id",void 0),Object(s.a)([Object(o.b)({readOnly:!0,value:null})],N.prototype,"networkLink",void 0),Object(s.a)([Object(o.b)({json:{write:{allowNull:!0}}})],N.prototype,"parent",void 0),Object(s.a)([Object(o.b)({value:null,json:{write:{allowNull:!0}}})],N.prototype,"sublayers",null),Object(s.a)([Object(_.a)("sublayers")],N.prototype,"castSublayers",null),Object(s.a)([Object(o.b)({value:null,json:{read:{source:"name",reader:e=>Object(E.d)(e)}}})],N.prototype,"title",void 0),Object(s.a)([Object(o.b)({value:!0})],N.prototype,"visible",null),Object(s.a)([Object(u.a)("visible",["visibility"])],N.prototype,"readVisible",null),Object(s.a)([Object(o.b)()],N.prototype,"sourceJSON",void 0),Object(s.a)([Object(o.b)({value:null})],N.prototype,"layer",null),Object(s.a)([Object(o.b)({type:p.a})],N.prototype,"fullExtent",void 0),N=i=Object(s.a)([Object(b.a)("esri.layers.support.KMLSublayer")],N);var T=N;const H=["kml","xml"];let C=class extends(Object(g.a)(Object(M.a)(Object(w.a)(Object(m.a)(Object(S.a)(Object(f.a)(j.a))))))){constructor(...e){super(...e),this._visibleFolders=[],this.allSublayers=new O.a({root:this,rootCollectionNames:["sublayers"],getChildrenFunction:e=>e.sublayers}),this.outSpatialReference=y.a.WGS84,this.path=null,this.legendEnabled=!1,this.operationalLayerType="KML",this.sublayers=null,this.type="kml",this.url=null}initialize(){this.watch("sublayers",(e,t)=>{t&&t.forEach(e=>{e.parent=null,e.layer=null}),e&&e.forEach(e=>{e.parent=this,e.layer=this})},!0),this.on("sublayer-update",()=>this.notifyChange("fullExtent"))}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}readSublayersFromItemOrWebMap(e,t){this._visibleFolders=t.visibleFolders}readSublayers(e,t,r){return Object(x.e)(T,t,r,this._visibleFolders)}writeSublayers(e,t){const r=[],i=e.toArray();for(;i.length;){const e=i[0];e.networkLink||(e.visible&&r.push(e.id),e.sublayers&&i.push(...e.sublayers.toArray())),i.shift()}t.visibleFolders=r}get title(){const e=this._get("title");return e&&"defaults"!==this.originOf("title")?e:this.url?Object(h.k)(this.url,H)||"KML":e||""}set title(e){this._set("title",e)}get visibleSublayers(){const e=this.sublayers,t=[],r=e=>{e.visible&&(t.push(e),e.sublayers&&e.sublayers.forEach(r))};return e&&e.forEach(r),t}get fullExtent(){return this._recomputeFullExtent()}load(e){const t=Object(l.i)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["KML"]},e).then(()=>this._fetchService(t))),Promise.resolve(this)}destroy(){super.destroy(),this.allSublayers.destroy()}_fetchService(e){var t=this;return Object(n.a)(function*(){const r=yield Promise.resolve().then(()=>t.resourceInfo?{ssl:!1,data:t.resourceInfo}:Object(x.b)(t.url,t.outSpatialReference,t.refreshInterval,e)),i=Object(x.d)(r.data);i&&t.read(i,{origin:"service"})})()}_recomputeFullExtent(){let e=null;this.extent&&(e=this.extent.clone());const t=r=>{if(r.sublayers)for(const i of r.sublayers.items)t(i),i.visible&&i.fullExtent&&(e?e.union(i.fullExtent):e=i.fullExtent.clone())};return t(this),e}};Object(s.a)([Object(o.b)({readOnly:!0})],C.prototype,"allSublayers",void 0),Object(s.a)([Object(o.b)({type:y.a})],C.prototype,"outSpatialReference",void 0),Object(s.a)([Object(o.b)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],C.prototype,"path",void 0),Object(s.a)([Object(o.b)({readOnly:!0,json:{read:!1,write:!1}})],C.prototype,"legendEnabled",void 0),Object(s.a)([Object(o.b)({type:["show","hide","hide-children"]})],C.prototype,"listMode",void 0),Object(s.a)([Object(o.b)({type:["KML"]})],C.prototype,"operationalLayerType",void 0),Object(s.a)([Object(o.b)({})],C.prototype,"resourceInfo",void 0),Object(s.a)([Object(o.b)({type:d.a.ofType(T),json:{write:{ignoreOrigin:!0}}})],C.prototype,"sublayers",void 0),Object(s.a)([Object(u.a)(["web-map","portal-item"],"sublayers",["visibleFolders"])],C.prototype,"readSublayersFromItemOrWebMap",null),Object(s.a)([Object(u.a)("service","sublayers",["sublayers"])],C.prototype,"readSublayers",null),Object(s.a)([Object(c.a)("sublayers")],C.prototype,"writeSublayers",null),Object(s.a)([Object(o.b)({readOnly:!0,json:{read:!1}})],C.prototype,"type",void 0),Object(s.a)([Object(o.b)({json:{origins:{"web-map":{read:{source:"title"}}},write:{ignoreOrigin:!0}}})],C.prototype,"title",null),Object(s.a)([Object(o.b)(v.n)],C.prototype,"url",void 0),Object(s.a)([Object(o.b)({readOnly:!0})],C.prototype,"visibleSublayers",null),Object(s.a)([Object(o.b)({type:p.a})],C.prototype,"extent",void 0),Object(s.a)([Object(o.b)()],C.prototype,"fullExtent",null),C=Object(s.a)([Object(b.a)("esri.layers.KMLLayer")],C),t.default=C},QmHG:function(e,t,r){"use strict";r.d(t,"a",function(){return j}),r.d(t,"b",function(){return n}),r.d(t,"c",function(){return y}),r.d(t,"d",function(){return O}),r.d(t,"e",function(){return l}),r.d(t,"f",function(){return o}),r.d(t,"g",function(){return a}),r.d(t,"h",function(){return p}),r.d(t,"i",function(){return s}),r.d(t,"j",function(){return h}),r.d(t,"k",function(){return c}),r.d(t,"l",function(){return b}),r.d(t,"m",function(){return u});var i=r("srIe");function n(e=f){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function s(e,t,r,i,s,l,a=n()){return a[0]=e,a[1]=t,a[2]=r,a[3]=i,a[4]=s,a[5]=l,a}function l(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function a(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function o(e,t,r){const i=t.length;let n=e[0],s=e[1],l=e[2],a=e[3],o=e[4],u=e[5];if(r)for(let b=0;b<i;b++){const e=t[b];n=Math.min(n,e[0]),s=Math.min(s,e[1]),l=Math.min(l,e[2]),a=Math.max(a,e[0]),o=Math.max(o,e[1]),u=Math.max(u,e[2])}else for(let b=0;b<i;b++){const e=t[b];n=Math.min(n,e[0]),s=Math.min(s,e[1]),a=Math.max(a,e[0]),o=Math.max(o,e[1])}e[0]=n,e[1]=s,e[2]=l,e[3]=a,e[4]=o,e[5]=u}function u(e,t=[0,0,0]){return t[0]=function(e){return e[0]>=e[3]?0:e[3]-e[0]}(e),t[1]=function(e){return e[1]>=e[4]?0:e[4]-e[1]}(e),t[2]=function(e){return e[2]>=e[5]?0:e[5]-e[2]}(e),t}function b(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function c(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function h(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function y(e){return e?h(e,j):n(j)}function p(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function d(e){return 6===e.length}function O(e,t,r){if(Object(i.h)(e)||Object(i.h)(t))return e===t;if(!d(e)||!d(t))return!1;if(r){for(let i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}r("OvF4"),r("kYAx");const j=[1/0,1/0,1/0,-1/0,-1/0,-1/0],f=[0,0,0,0,0,0];n()}}]);