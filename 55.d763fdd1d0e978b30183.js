(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{"/Lnp":function(e,t,i){"use strict";i.r(t),i.d(t,"previewCIMSymbol",function(){return v});var r=i("HaE+"),n=i("qRWG"),o=i("1EXT"),a=i("s7YA"),s=i("9MzC"),l=i("qatw"),c=i("SFo0"),f=i("Lqtk"),m=i("NrhG"),h=i("T8sT"),u=i("e4KH");class d{constructor(){}rasterizeText(e,t){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));const i=this._textRasterizationCanvas,r=i.getContext("2d");this.setFontProperties(r,t),this.parameters=t,this.textLines=e.split(/\r?\n/),this.lineHeight=this.computeLineHeight();const n=this.computeTextWidth(r,t),o=this.lineHeight*this.textLines.length;i.width=n,i.height=o,this.renderedLineHeight=Math.round(this.lineHeight*t.pixelRatio),this.renderedHaloSize=t.halo.size*t.pixelRatio,this.renderedWidth=n*t.pixelRatio,this.renderedHeight=o*t.pixelRatio,this.fillStyle=function(e){return`rgba(${e.slice(0,3).toString()},${e[3]})`}(t.color),this.haloStyle=function(e){return`rgb(${e.slice(0,3).toString()})`}(t.halo.color);const a=this.renderedLineHeight,s=this.renderedHaloSize;this.setFontProperties(r,t);const l=function(e,t){return"center"===e?.5*t:"right"===e?t:0}(r.textAlign,this.renderedWidth)+s,c=s;let f=0,m=0;s>0&&this.renderHalo(r,l,c,f,m,t),m+=c,f+=l;for(const d of this.textLines)r.globalCompositeOperation="destination-out",r.fillStyle="rgb(0, 0, 0)",r.fillText(d,f,m),r.globalCompositeOperation="source-over",r.fillStyle=this.fillStyle,r.fillText(d,f,m),m+=a;const h=r.getImageData(0,0,this.renderedWidth,this.renderedHeight),u=new Uint8Array(h.data);if(t.premultiplyColors){let e;for(let t=0;t<u.length;t+=4)e=u[t+3]/255,u[t]=u[t]*e,u[t+1]=u[t+1]*e,u[t+2]=u[t+2]*e}return{size:[this.renderedWidth,this.renderedHeight],image:new Uint32Array(u.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}renderHalo(e,t,i,r,n,o){const a=this.renderedWidth,s=this.renderedHeight;this._haloRasterizationCanvas||(this._haloRasterizationCanvas=document.createElement("canvas")),this._haloRasterizationCanvas.width=a,this._haloRasterizationCanvas.height=s;const l=this._haloRasterizationCanvas,c=l.getContext("2d");c.clearRect(0,0,a,s),this.setFontProperties(c,o),c.fillStyle=this.haloStyle,c.strokeStyle=this.haloStyle;const f=this.renderedHaloSize<3;c.lineJoin=f?"miter":"round",f?this.renderHaloEmulated(c,t,i):this.renderHaloNative(c,t,i),e.globalAlpha=this.parameters.halo.color[3],e.drawImage(l,0,0,a,s,r,n,a,s),e.globalAlpha=1}renderHaloEmulated(e,t,i){const r=this.renderedLineHeight,n=this.renderedHaloSize;for(const o of this.textLines){for(const[r,a]of y)e.fillText(o,t+n*r,i+n*a);i+=r}}renderHaloNative(e,t,i){const r=this.renderedLineHeight,n=this.renderedHaloSize;for(const o of this.textLines){const a=2*n,s=5,l=.1;for(let r=0;r<s;r++)e.lineWidth=(1-(s-1)*l+r*l)*a,e.strokeText(o,t,i);i+=r}}setFontProperties(e,t){const i=t.font,r=`${i.style} ${i.weight} ${Object(n.d)(t.size*t.pixelRatio)}px ${i.family}, sans-serif`;let o;switch(e.font=r,e.textBaseline="top",t.horizontalAlignment){case"left":o="left";break;case"right":o="right";break;case"center":o="center";break;default:o="left"}e.textAlign=o}computeTextWidth(e,t){let i=0;for(const n of this.textLines)i=Math.max(i,e.measureText(n).width);const r=t.font;return("italic"===r.style||"oblique"===r.style||"string"==typeof r.weight&&("bold"===r.weight||"bolder"===r.weight)||"number"==typeof r.weight&&r.weight>600)&&(i+=.3*e.measureText("A").width),i+=2*this.parameters.halo.size,Math.round(i)}computeLineHeight(){return Math.round(1.275*this.parameters.size+2*this.parameters.halo.size)}}const y=[];{const e=16;for(let t=0;t<360;t+=360/e)y.push([Math.cos(Math.PI*t/180),Math.sin(Math.PI*t/180)])}var g,p;(p=g||(g={})).Legend="legend",p.Preview="preview";const b=(e,t,i)=>{if(e&&e.targetSize){let r;if(i){const t=Math.max(i.frame.xmax-i.frame.xmin,i.frame.ymax-i.frame.ymin);r=e.targetSize/Object(n.d)(t)}else r=e.targetSize/t.referenceSize;return r}return e&&e.scaleFactor?e.scaleFactor:1},O={fill:{legend:{frame:{xmax:15,xmin:0,ymax:15,ymin:0},geometry:{rings:[[[0,15],[15,7.5],[15,0],[0,0],[0,15]]]},canvasPaths:{rings:[[[0,15],[0,0],[15,7.5],[15,15],[0,15]]]}},preview:{frame:{xmax:100,xmin:0,ymax:100,ymin:0},geometry:{rings:[[[0,100],[100,100],[100,0],[0,0],[0,100]]]},canvasPaths:{rings:[[[0,100],[0,0],[100,0],[100,100],[0,100]]]}}},stroke:{legend:{frame:{xmax:24,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[12,0],[24,0]]]},canvasPaths:{paths:[[[0,2],[12,2],[24,2]]]}},preview:{frame:{xmax:100,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[50,0],[100,0]]]},canvasPaths:{paths:[[[0,2],[50,2],[100,2]]]}}}};function S(e,t,i,r){let n,o;return"function"==typeof e.materialHash?(n=(0,e.materialHash)(t,i,r),o=Object(h.a)(e.cim,e.materialOverrides)):(n=e.materialHash,o=e.cim),{analyzedCIM:o,hash:n}}const x=new class{constructor(e,t){this._spatialReference=e,this._avoidSDF=t,this._resourceCache=new Map,this._rasterizer=new u.a,this._textRasterizer=new d,this._pictureMarkerCache=new Map}rasterizeCIMSymbolAsync(e,t,i,n,o,a,s,c){var f=this;return Object(r.a)(function*(){n=n||(t?null!=t.centroid?"esriGeometryPolygon":Object(l.c)(t.geometry):null)||function(e){if(!(e&&e.data&&e.data.symbol))return null;switch(e.data.symbol.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}(e);const r=yield f.analyzeCIMSymbol(e,t?function(e){return(e?Object.keys(e):[]).map(t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"}))}(t.attributes):null,i,n,c);return f.rasterizeCIMSymbol(r,t,n,o,a,s)})()}analyzeCIMSymbol(e,t,i,n,o){var a=this;return Object(r.a)(function*(){const r=[],l=t?{geometryType:n,spatialReference:a._spatialReference,fields:t}:null;let c;yield Object(h.b)(e.data,l,r,a._avoidSDF),Object(s.u)(o);for(const e of r)"CIMPictureMarker"!==e.cim.type&&"CIMPictureFill"!==e.cim.type&&"CIMPictureStroke"!==e.cim.type||(c||(c=[]),c.push(a.fetchPictureMarkerResource(e,o))),i&&"text"===e.type&&"string"==typeof e.text&&e.text.indexOf("[")>-1&&(e.text=Object(m.c)(i,e.text,e.cim.textCase));return c&&(yield Promise.all(c)),r})()}fetchPictureMarkerResource(e,t){var i=this;return Object(r.a)(function*(){const r=e.materialHash;if(!i._pictureMarkerCache.get(r)){const n=(yield Object(f.default)(e.cim.url,{responseType:"image",signal:t&&t.signal})).data;i._pictureMarkerCache.set(r,n)}})()}rasterizeCIMSymbol(e,t,i,r,n,o){const a=[];for(const s of e){r&&"function"==typeof r.scaleFactor&&(r.scaleFactor=r.scaleFactor(t,n,o));const e=this._getRasterizedResource(s,t,i,r,n,o);if(!e)continue;let l=0,c=e.anchorX||0,f=e.anchorY||0,h=!1,u=0,d=0;if("esriGeometryPoint"===i){const e=b(r,s,null);if(u=Object(m.d)(s.offsetX,t,n,o)*e||0,d=Object(m.d)(s.offsetY,t,n,o)*e||0,"marker"===s.type)l=Object(m.d)(s.rotation,t,n,o)||0,h=!!s.rotateClockwise&&s.rotateClockwise;else if("text"===s.type){if(l=Object(m.d)(s.angle,t,n,o)||0,void 0!==s.horizontalAlignment)switch(s.horizontalAlignment){case"left":c=-.5;break;case"right":c=.5;break;default:c=0}if(void 0!==s.verticalAlignment)switch(s.verticalAlignment){case"top":f=.5;break;case"bottom":f=-.5;break;case"baseline":f=-.25;break;default:f=0}}}null!=e&&a.push({angle:l,rotateClockWise:h,anchorX:c,anchorY:f,offsetX:u,offsetY:d,rasterizedResource:e})}return this.getSymbolImage(a)}getSymbolImage(e){const t=document.createElement("canvas"),i=t.getContext("2d");let r=0,o=0,a=0,s=0;const l=[];for(let c=0;c<e.length;c++){const t=e[c],f=t.rasterizedResource;if(!f)continue;const m=f.size,h=t.offsetX,u=t.offsetY,d=t.anchorX,y=t.anchorY,g=t.rotateClockWise||!1;let p=t.angle,b=Object(n.d)(h)-m[0]*(.5+d),O=Object(n.d)(u)-m[1]*(.5+y),S=b+m[0],x=O+m[1];if(p){g&&(p=-p);const e=Math.sin(p*Math.PI/180),t=Math.cos(p*Math.PI/180),i=b*t-O*e,r=b*e+O*t,n=b*t-x*e,o=b*e+x*t,a=S*t-x*e,s=S*e+x*t,l=S*t-O*e,c=S*e+O*t;b=Math.min(i,n,a,l),O=Math.min(r,o,s,c),S=Math.max(i,n,a,l),x=Math.max(r,o,s,c)}r=b<r?b:r,o=O<o?O:o,a=S>a?S:a,s=x>s?x:s;const v=i.createImageData(f.size[0],f.size[1]);v.data.set(new Uint8ClampedArray(f.image.buffer)),l.push({offsetX:h,offsetY:u,rotateClockwise:g,angle:p,rasterizedImage:v,anchorX:d,anchorY:y})}t.width=a-r,t.height=s-o;const f=-r,m=s;for(let c=0;c<l.length;c++){const e=l[c],t=this._imageDataToCanvas(e.rasterizedImage),r=f-e.rasterizedImage.width*(.5+e.anchorX),o=m-e.rasterizedImage.height*(.5-e.anchorY);if(e.angle){const a=(360-e.angle)*Math.PI/180;i.save(),i.translate(Object(n.d)(e.offsetX),-Object(n.d)(e.offsetY)),i.translate(f,m),i.rotate(a),i.translate(-f,-m),i.drawImage(t,r,o),i.restore()}else i.drawImage(t,r+Object(n.d)(e.offsetX),o-Object(n.d)(e.offsetY))}const h=new c.b({x:f/t.width-.5,y:m/t.height-.5});return{imageData:0!==t.width&&0!==t.height?i.getImageData(0,0,t.width,t.height):i.createImageData(1,1),anchorPosition:h}}_imageDataToCanvas(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));const t=this._imageDataCanvas,i=t.getContext("2d");return t.width=e.width,t.height=e.height,i.putImageData(e,0,0),t}_imageTo32Array(e,t,i){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));const r=this._imageDataCanvas,n=r.getContext("2d");return r.width=t,r.height=i,n.drawImage(e,0,0,t,i),new Uint32Array(n.getImageData(0,0,t,i).data.buffer)}_getRasterizedResource(e,t,i,r,n,s){let l,c,f,h;if("esriGeometryPolyline"===i||"esriGeometryPolygon"===i){const o=r&&r.style?r.style:g.Legend,h="esriGeometryPolyline"===i?O.stroke[o]:O.fill[o];if("line"===e.type){if("CIMSolidStroke"!==e.cim.type){if("CIMPictureStroke"===e.cim.type){const i=Object(m.d)(e.width,t,n,s),{image:r,width:o,height:a}=this._getPictureResource(e,i);return this._rasterizePictureResource(e,r,o,a,h,i)}return null}({analyzedCIM:l,hash:f}=S(e,t,n,s)),c=this._embedCIMLayerInVectorMarker(l,h)}else if("marker"===e.type){if("CIMPictureMarker"===e.cim.type)return null;if("CIMVectorMarker"!==e.cim.type)return null;e.cim.offsetX=Object(m.d)(e.offsetX,t,n,s),e.cim.offsetY=Object(m.d)(e.offsetY,t,n,s),e.cim.rotation=Object(m.d)(e.rotation,t,n,s),e.cim.markerPlacement=e.markerPlacement,({analyzedCIM:l}=S(e,t,n,s)),f=Object(a.b)(JSON.stringify(l)).toString(),c=this._embedCIMLayerInVectorMarker(l,h)}else{if("text"===e.type)return null;if("fill"===e.type){if("CIMHatchFill"===e.cim.type||"CIMVectorMarker"===e.cim.type||"CIMPictureMarker"===e.cim.type||"CIMPictureFill"===e.cim.type){const i=e.cim.size||e.cim.height;let r,o,a;if("CIMPictureMarker"===e.cim.type||"CIMPictureFill"===e.cim.type)({image:r,width:o,height:a}=this._getPictureResource(e,i));else{({analyzedCIM:l,hash:f}=S(e,t,n,s));const i=this._rasterizer.rasterizeJSONResource(l,1,this._avoidSDF);r=i.image,o=i.size[0],a=i.size[1]}return this._rasterizePictureResource(e,r,o,a,h,null)}if("CIMSolidFill"!==e.cim.type)return null;({analyzedCIM:l,hash:f}=S(e,t,n,s)),c=this._embedCIMLayerInVectorMarker(l,h)}}}else{if("text"===e.type)return h=this._rasterizeTextResource(e,t,r,n,s),h;({analyzedCIM:l,hash:f}=S(e,t,n,s));const i=b(r,e,null);if("CIMPictureMarker"===e.cim.type){const r=Object(m.d)(e.size,t,n,s)*i,{image:o,width:a,height:l}=this._getPictureResource(e,r);return h={image:o,size:[a,l],sdf:!1,simplePattern:!1,anchorX:e.anchorPoint?e.anchorPoint.x:0,anchorY:e.anchorPoint?e.anchorPoint.y:0},h}Object(o.c)(l,i,{preserveOutlineWidth:!1}),c=l}f+=i,r&&(f+=JSON.stringify(r));const u=this._resourceCache;return u.has(f)?u.get(f):(h=this._rasterizer.rasterizeJSONResource(c,window.devicePixelRatio||1,this._avoidSDF),u.set(f,h),h)}_rasterizeTextResource(e,t,i,r,n){const o=b(i,e,null),a=Object(m.d)(e.text,t,r,n);if(!a||0===a.length)return null;const s=Object(m.d)(e.fontName,t,r,n),l=Object(m.d)(e.style,t,r,n),c=Object(m.d)(e.weight,t,r,n),f=Object(m.d)(e.decoration,t,r,n),h=Object(m.d)(e.size,t,r,n)*o,u=Object(m.d)(e.horizontalAlignment,t,r,n),d=Object(m.d)(e.verticalAlignment,t,r,n),y=Object(m.b)(Object(m.d)(e.color,t,r,n)),g=Object(m.b)(Object(m.d)(e.outlineColor,t,r,n)),p={color:y,size:h,horizontalAlignment:u,verticalAlignment:d,font:{family:s,style:l,weight:c,decoration:f},halo:{size:Object(m.d)(e.outlineSize,t,r,n)||0,color:g,style:l},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(a,p)}_rasterizePictureResource(e,t,i,r,o,a){const s=document.createElement("canvas"),c=s.getContext("2d");s.height=Object(n.d)(Math.max(Math.abs(o.frame.ymax-o.frame.ymin),a)),s.width=Object(n.d)(Math.abs(o.frame.xmax-o.frame.xmin));const f=c.createImageData(i,r);f.data.set(new Uint8ClampedArray(t.buffer));const m=this._imageDataToCanvas(f),h=c.createPattern(m,"repeat"),u=Math.cos((-e.cim.rotation||0)*Math.PI/180),d=Math.sin((-e.cim.rotation||0)*Math.PI/180);h.setTransform({m11:u,m12:d,m21:-d,m22:u,m41:Object(n.d)(e.cim.offsetX)||0,m42:Object(n.d)(e.cim.offsetY)||0});const y=o.canvasPaths;let g,p,b;Object(l.g)(y)?(g=y.rings,c.fillStyle=h,p=c.fill,b=["evenodd"]):Object(l.h)(y)&&(g=y.paths,c.strokeStyle=h,c.lineWidth=a,p=c.stroke,g[0][0][1]=s.height/2,g[0][1][1]=s.height/2),c.beginPath();for(const l of g){const e=l?l.length:0;if(e>1){let t=l[0];c.moveTo(Object(n.d)(t[0]),Object(n.d)(t[1]));for(let i=1;i<e;++i)t=l[i],c.lineTo(Object(n.d)(t[0]),Object(n.d)(t[1]));c.closePath()}}p.apply(c,b);const O=c.getImageData(0,0,s.width,s.height),S=new Uint8Array(O.data);return{size:[s.width,s.height],image:new Uint32Array(S.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}_getPictureResource(e,t){const i=this._pictureMarkerCache.get(e.materialHash);if(!i)return null;const r=i.height/i.width,o=t?r>1?Object(n.d)(t):Object(n.d)(t)/r:i.width,a=t?r>1?Object(n.d)(t)*r:Object(n.d)(t):i.height;return{image:this._imageTo32Array(i,o,a),width:o,height:a}}_embedCIMLayerInVectorMarker(e,t){const i=Object(l.g)(t.geometry)?"CIMPolygonSymbol":"CIMLineSymbol";return{type:"CIMVectorMarker",frame:t.frame,markerGraphics:[{type:"CIMMarkerGraphic",geometry:t.geometry,symbol:{type:i,symbolLayers:[e]}}]}}}(null,!0);function v(e){return M.apply(this,arguments)}function M(){return(M=Object(r.a)(function*(e,t={}){const{size:i,maxSize:r,node:a,opacity:s}=t,l=t.cimOptions||t,{feature:c,fieldMap:f,geometryType:m,style:h}=l,u=Object(o.b)(e),d=Math.min(null!=i?i:u,null!=r?r:Object(n.e)(120));d!==u&&(e=e.clone(),Object(o.d)(e,d,{preserveOutlineWidth:!0}));let y=3;e&&e.data&&e.data.symbol&&"CIMPointSymbol"!==e.data.symbol.type&&(y=1);const g=yield x.rasterizeCIMSymbolAsync(e,c,f,m,{scaleFactor:y,style:h}),p=document.createElement("canvas");p.width=g.imageData.width,p.height=g.imageData.height,p.getContext("2d").putImageData(g.imageData,0,0);let b=p.width/y,O=p.height/y;if(null!=i&&(null==(null==t?void 0:t.scale)||(null==t?void 0:t.scale))){const e=b/O;b=e<=1?Math.ceil(d*e):d,O=e<=1?d:Math.ceil(d/e)}const S=new Image(b,O);return S.src=p.toDataURL(),null!=s&&(S.style.opacity=`${s}`),a&&a.appendChild(S),S})).apply(this,arguments)}},AIxD:function(e,t,i){"use strict";i.d(t,"a",function(){return O}),i.d(t,"b",function(){return g}),i.d(t,"c",function(){return s}),i.d(t,"d",function(){return S}),i.d(t,"e",function(){return x}),i.d(t,"f",function(){return v}),i.d(t,"g",function(){return M});var r=i("qatw");const n=(e,t,i)=>[t,i],o=(e,t,i)=>[t,i,e[2]],a=(e,t,i)=>[t,i,e[2],e[3]];function s(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:e.extent?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function l({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}function c({scale:e,translate:t},i){return Math.round((t[1]-i)/e[1])}function f(e,t,i){const r=[];let n,o,a,s;for(let f=0;f<i.length;f++){const m=i[f];f>0?(a=l(e,m[0]),s=c(e,m[1]),a===n&&s===o||(r.push(t(m,a-n,s-o)),n=a,o=s)):(n=l(e,m[0]),o=c(e,m[1]),r.push(t(m,n,o)))}return r.length>0?r:null}function m({scale:e,translate:t},i){return i*e[0]+t[0]}function h({scale:e,translate:t},i){return t[1]-i*e[1]}function u(e,t,i){const r=new Array(i.length);if(!i.length)return r;const[n,o]=e.scale;let a=m(e,i[0][0]),s=h(e,i[0][1]);r[0]=t(i[0],a,s);for(let l=1;l<i.length;l++){const e=i[l];a+=e[0]*n,s-=e[1]*o,r[l]=t(e,a,s)}return r}function d(e,t,i){const r=new Array(i.length);for(let n=0;n<i.length;n++)r[n]=u(e,t,i[n]);return r}function y(e,t,i,r,s){return t.points=function(e,t,i,r){return f(e,i?r?a:o:r?o:n,t)}(e,i.points,r,s),t}function g(e,t,i,r,n){return t.x=l(e,i.x),t.y=c(e,i.y),t!==i&&(r&&(t.z=i.z),n&&(t.m=i.m)),t}function p(e,t,i,r,s){const l=function(e,t,i,r){const s=[],l=i?r?a:o:r?o:n;for(let n=0;n<t.length;n++){const i=f(e,l,t[n]);i&&i.length>=3&&s.push(i)}return s.length?s:null}(e,i.rings,r,s);return l?(t.rings=l,t):null}function b(e,t,i,r,s){const l=function(e,t,i,r){const s=[],l=i?r?a:o:r?o:n;for(let n=0;n<t.length;n++){const i=f(e,l,t[n]);i&&i.length>=2&&s.push(i)}return s.length?s:null}(e,i.paths,r,s);return l?(t.paths=l,t):null}function O(e,t){return e&&t?Object(r.f)(t)?g(e,{},t,!1,!1):Object(r.h)(t)?b(e,{},t,!1,!1):Object(r.g)(t)?p(e,{},t,!1,!1):Object(r.e)(t)?y(e,{},t,!1,!1):Object(r.d)(t)?((n={}).xmin=l(i=e,(o=t).xmin),n.ymin=c(i,o.ymin),n.xmax=l(i,o.xmax),n.ymax=c(i,o.ymax),n):null:null;var i,n,o}function S(e,t,i,r,s){return t.points=function(e,t,i,r){return u(e,i?r?a:o:r?o:n,t)}(e,i.points,r,s),t}function x(e,t,i,r,n){return t.x=m(e,i.x),t.y=h(e,i.y),t!==i&&(r&&(t.z=i.z),n&&(t.m=i.m)),t}function v(e,t,i,r,s){return t.rings=function(e,t,i,r){return d(e,i?r?a:o:r?o:n,t)}(e,i.rings,r,s),t}function M(e,t,i,r,s){return t.paths=function(e,t,i,r){return d(e,i?r?a:o:r?o:n,t)}(e,i.paths,r,s),t}},QFw1:function(e,t,i){"use strict";i.d(t,"a",function(){return f}),i.d(t,"b",function(){return l}),i.d(t,"c",function(){return a}),i.d(t,"d",function(){return c});var r=i("qatw"),n=i("Du6U"),o=i("X4zr");function a(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":{const t=e.symbolLayers;return t&&1===t.length?a(t[0]):null}case"CIMVectorMarker":{const t=e.markerGraphics;if(!t||1!==t.length)return null;const i=t[0];if(!i)return null;const r=i.geometry;if(!r)return null;const n=i.symbol;return!n||"CIMPolygonSymbol"!==n.type&&"CIMLineSymbol"!==n.type?null:{geom:r,asFill:"CIMPolygonSymbol"===n.type}}case"sdf":return{geom:e.geom,asFill:e.asFill}}return null}function s(e){let t=1/0,i=-1/0,r=1/0,n=-1/0;for(const o of e)for(const e of o)e[0]<t&&(t=e[0]),e[0]>i&&(i=e[0]),e[1]<r&&(r=e[1]),e[1]>n&&(n=e[1]);return[t,r,i,n]}function l(e){return e?e.rings?s(e.rings):e.paths?s(e.paths):Object(r.d)(e)?[e.xmin,e.ymin,e.xmax,e.ymax]:null:null}function c(e,t,i,r,n){const[o,a,s,l]=e;if(s<o||l<a)return[0,0,0];const c=s-o,f=l-a,m=Math.floor(31.5),h=(128-2*(m+1))/Math.max(c,f),u=Math.round(c*h)+2*m,d=Math.round(f*h)+2*m;let y=1;t&&(y=d/h/(t.ymax-t.ymin));let g=0,p=0;return r&&(n?t&&i&&t.ymax-t.ymin>0&&(g=r.x/(i*((t.xmax-t.xmin)/(t.ymax-t.ymin))),p=r.y/i):(g=r.x,p=r.y)),g=.5*(t.xmax+t.xmin)+g*(t.xmax-t.xmin),p=.5*(t.ymax+t.ymin)+p*(t.ymax-t.ymin),g-=o,p-=a,g*=h,p*=h,g+=m,p+=m,[y,g/u-.5,-(p/d-.5)]}function f(e){const t=function(e){return e?e.rings?e.rings:e.paths?e.paths:void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:null:null}(e.geom),i=function(e){let t=1/0,i=-1/0,r=1/0,o=-1/0;for(const n of e)for(const e of n)e[0]<t&&(t=e[0]),e[0]>i&&(i=e[0]),e[1]<r&&(r=e[1]),e[1]>o&&(o=e[1]);return new n.a(t,r,i-t,o-r)}(t),r=Math.floor(31.5),o=(128-2*(r+1))/Math.max(i.width,i.height),a=Math.round(i.width*o)+2*r,s=Math.round(i.height*o)+2*r,l=[];for(const n of t)if(n&&n.length>1){const t=[];for(const e of n){let[n,a]=e;n-=i.x,a-=i.y,n*=o,a*=o,n+=r-.5,a+=r-.5,t.push([n,a])}if(e.asFill){const e=t.length-1;t[0][0]===t[e][0]&&t[0][1]===t[e][1]||t.push(t[0])}l.push(t)}const c=function(e,t,i,r){const n=t*i,o=new Array(n),a=r*r+1;for(let s=0;s<n;++s)o[s]=a;for(const s of e){const e=s.length;for(let n=1;n<e;++n){const e=s[n-1],a=s[n];let l,c,f,m;e[0]<a[0]?(l=e[0],c=a[0]):(l=a[0],c=e[0]),e[1]<a[1]?(f=e[1],m=a[1]):(f=a[1],m=e[1]);let h=Math.floor(l)-r,u=Math.floor(c)+r,d=Math.floor(f)-r,y=Math.floor(m)+r;h<0&&(h=0),u>t&&(u=t),d<0&&(d=0),y>i&&(y=i);const g=a[0]-e[0],p=a[1]-e[1],b=g*g+p*p;for(let r=h;r<u;r++)for(let n=d;n<y;n++){let s,l,c=(r-e[0])*g+(n-e[1])*p;c<0?(s=e[0],l=e[1]):c>b?(s=a[0],l=a[1]):(c/=b,s=e[0]+c*g,l=e[1]+c*p);const f=(r-s)*(r-s)+(n-l)*(n-l),m=(i-n-1)*t+r;f<o[m]&&(o[m]=f)}}}for(let s=0;s<n;++s)o[s]=Math.sqrt(o[s]);return o}(l,a,s,r);return e.asFill&&function(e,t,i,r,n){for(const o of e){const e=o.length;for(let a=1;a<e;++a){const e=o[a-1],s=o[a];let l,c,f,m;e[0]<s[0]?(l=e[0],c=s[0]):(l=s[0],c=e[0]),e[1]<s[1]?(f=e[1],m=s[1]):(f=s[1],m=e[1]);let h=Math.floor(l),u=Math.floor(c)+1,d=Math.floor(f),y=Math.floor(m)+1;h<r&&(h=r),u>t-r&&(u=t-r),d<r&&(d=r),y>i-r&&(y=i-r);for(let o=d;o<y;++o){if(e[1]>o==s[1]>o)continue;const a=(i-o-1)*t;for(let t=h;t<u;++t)t<(s[0]-e[0])*(o-e[1])/(s[1]-e[1])+e[0]&&(n[a+t]=-n[a+t]);for(let e=r;e<h;++e)n[a+e]=-n[a+e]}}}}(l,a,s,r,c),[m(c,r),a,s]}function m(e,t){const i=2*t,r=e.length,n=new Uint8Array(4*r);for(let a=0;a<r;++a){const t=.5-e[a]/i;Object(o.a)(t,n,4*a)}return n}},T8sT:function(e,t,i){"use strict";i.d(t,"a",function(){return T}),i.d(t,"b",function(){return S});var r=i("HaE+"),n=i("s7YA"),o=i("6S2I"),a=i("gvqN"),s=i("nvBr"),l=i("qRWG"),c=i("NrhG"),f=i("ictz"),m=i("eT81"),h=i("QFw1");const u=o.a.getLogger("esri.symbols.cim.cimAnalyzer");function d(e){switch(e){case"Butt":return 0;case"Square":return 2;case"Round":default:return 1}}function y(e){switch(e){case"Bevel":return 0;case"Miter":return 2;case"Round":default:return 1}}function g(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":return"center";case"Justify":return"justify"}}function p(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function b(e,t,i,r){let n;e[t]?n=e[t]:(n={},e[t]=n),n[i]=r}function O(e){const t=e.markerPlacement;return t&&t.angleToLine?1:0}function S(e,t,i,r){return x.apply(this,arguments)}function x(){return(x=Object(r.a)(function*(e,t,i,r){const n=i||[];if(!e)return n;let o,s;const l={};if("CIMSymbolReference"!==e.type)return u.error("Expect cim type to be 'CIMSymbolReference'"),n;if(o=e.symbol,s=e.primitiveOverrides,s){const e=[];for(const i of s){const r=i.valueExpressionInfo;if(r&&t){const n=r.expression,o=Object(a.d)(n,t.spatialReference,t.fields).then(e=>{e&&b(l,i.primitiveName,i.propertyName,e)});e.push(o)}else null!=i.value&&b(l,i.primitiveName,i.propertyName,i.value)}yield Promise.all(e)}switch(o.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":v(o,s,l,t,n,r)}return n})).apply(this,arguments)}function v(e,t,i,r,n,o){if(!e)return;const a=e.symbolLayers;if(!a)return;let s;const l=m.a.getSize(e);"CIMPointSymbol"===e.type&&"Map"===e.angleAlignment&&(s=1);let c=a.length;for(;c--;){const f=a[c];if(!f||!1===f.enable)continue;const h=[];switch(m.b.findApplicableOverrides(f,t,h),f.type){case"CIMSolidFill":M(f,i,h,r,n);break;case"CIMPictureFill":C(f,i,h,r,n);break;case"CIMHatchFill":k(f,i,h,r,n);break;case"CIMGradientFill":P(f,i,h,r,n);break;case"CIMSolidStroke":w(f,i,h,r,n,"CIMPolygonSymbol"===e.type,l);break;case"CIMPictureStroke":z(f,i,h,r,n,"CIMPolygonSymbol"===e.type,l);break;case"CIMGradientStroke":I(f,i,h,r,n,"CIMPolygonSymbol"===e.type,l);break;case"CIMCharacterMarker":if(j(f,i,h,r,n))break;break;case"CIMPictureMarker":if(j(f,i,h,r,n))break;"CIMLineSymbol"===e.type&&(s=O(f)),N(f,i,h,r,n,s,l);break;case"CIMVectorMarker":if(j(f,i,h,r,n))break;"CIMLineSymbol"===e.type&&(s=O(f)),L(f,i,h,r,n,s,l,o);break;default:u.error("Cannot analyze CIM layer",f.type)}}}function M(e,t,i,r,o){const a=e.primitiveName,s=Object(c.e)(e.color),l=Object(n.b)(JSON.stringify(e)).toString();o.push({type:"fill",templateHash:l,materialHash:0===i.length?l:()=>l,cim:e,materialOverrides:null,colorLocked:e.colorLocked,color:Y(a,t,"Color",r,s,_),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:e.effects})}function C(e,t,i,r,o){const a=e.primitiveName,s=e.tintColor?Object(c.e)(e.tintColor):{r:255,g:255,b:255,a:1},l=Object(n.b)(JSON.stringify(e)).toString(),f=Object(n.b)(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString();o.push({type:"fill",templateHash:l,materialHash:0===i.length?f:()=>f,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,color:Y(a,t,"TintColor",r,s,_),height:Y(a,t,"Height",r,e.height),scaleX:Y(a,t,"ScaleX",r,e.scaleX),angle:Y(a,t,"Rotation",r,e.rotation),offsetX:Y(a,t,"OffsetX",r,e.offsetX),offsetY:Y(a,t,"OffsetY",r,e.offsetY)})}function k(e,t,i,r,o){const a=["Rotation","OffsetX","OffsetY"],s=i.filter(t=>t.primitiveName!==e.primitiveName&&-1===a.indexOf(t.propertyName)),l=e.primitiveName,c=Object(n.b)(JSON.stringify(e)).toString(),f=Object(n.b)(`${e.separation}${JSON.stringify(e.lineSymbol)}`).toString();o.push({type:"fill",templateHash:c,materialHash:0===i.length?f:F(f,t,s,r),cim:e,materialOverrides:s,colorLocked:e.colorLocked,effects:e.effects,color:{r:255,g:255,b:255,a:1},height:Y(l,t,"Separation",r,e.separation),scaleX:1,angle:Y(l,t,"Rotation",r,e.rotation),offsetX:Y(l,t,"OffsetX",r,e.offsetX),offsetY:Y(l,t,"OffsetY",r,e.offsetY)})}function P(e,t,i,r,o){const a=Object(n.b)(JSON.stringify(e)).toString();o.push({type:"fill",templateHash:a,materialHash:0===i.length?a:F(a,t,i,r),cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1})}function w(e,t,i,r,o,a,s){const l=Object(n.b)(JSON.stringify(e)).toString(),f=e.primitiveName,m=Object(c.e)(e.color),h=void 0!==e.width?e.width:4,u=d(e.capStyle),g=y(e.joinStyle),p=e.miterLimit;o.push({type:"line",templateHash:l,materialHash:0===i.length?l:()=>l,cim:e,materialOverrides:null,isOutline:a,colorLocked:e.colorLocked,effects:e.effects,color:Y(f,t,"Color",r,m,_),width:Y(f,t,"Width",r,h),cap:Y(f,t,"CapStyle",r,u),join:Y(f,t,"JoinStyle",r,g),miterLimit:Y(f,t,"MiterLimit",r,p),referenceWidth:s,zOrder:A(e.name),isDashed:!1})}function z(e,t,i,r,o,a,s){const l=Object(n.b)(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString(),f=e.primitiveName,m=Object(c.e)(e.tintColor),h=void 0!==e.width?e.width:4,u=d(e.capStyle),g=y(e.joinStyle),p=e.miterLimit,b=Object(n.b)(JSON.stringify(e)).toString();o.push({type:"line",templateHash:b,materialHash:0===i.length?l:()=>l,cim:e,materialOverrides:null,isOutline:a,colorLocked:e.colorLocked,effects:e.effects,color:Y(f,t,"TintColor",r,m,_),width:Y(f,t,"Width",r,h),cap:Y(f,t,"CapStyle",r,u),join:Y(f,t,"JoinStyle",r,g),miterLimit:Y(f,t,"MiterLimit",r,p),referenceWidth:s,zOrder:A(e.name),isDashed:!1})}function I(e,t,i,r,o,a,s){const l=e.primitiveName,c=void 0!==e.width?e.width:4,f=d(e.capStyle),m=y(e.joinStyle),h=e.miterLimit,u=Object(n.b)(JSON.stringify(e)).toString();o.push({type:"line",templateHash:u,materialHash:0===i.length?u:F(u,t,i,r),cim:e,materialOverrides:null,isOutline:a,colorLocked:e.colorLocked,effects:e.effects,color:{r:128,g:128,b:128,a:1},width:Y(l,t,"Width",r,c),cap:Y(l,t,"CapStyle",r,f),join:Y(l,t,"JoinStyle",r,m),miterLimit:Y(l,t,"MiterLimit",r,h),referenceWidth:s,zOrder:A(e.name),isDashed:!1})}function j(e,t,i,r,o){const a=e.markerPlacement;if(!a||"CIMMarkerPlacementInsidePolygon"!==a.type)return!1;const s=a,l=["Rotation","OffsetX","OffsetY"],c=i.filter(t=>t.primitiveName!==e.primitiveName&&-1===l.indexOf(t.propertyName)),f=Object(n.b)(JSON.stringify(e)).toString();return o.push({type:"fill",templateHash:f,materialHash:0===i.length?f:F(f,t,c,r),cim:e,materialOverrides:c,colorLocked:e.colorLocked,effects:e.effects,color:{r:255,g:255,b:255,a:1},height:Y(s.primitiveName,t,"StepY",r,s.stepY),scaleX:1,angle:Y(s.primitiveName,t,"GridAngle",r,s.gridAngle),offsetX:Y(s.primitiveName,t,"OffsetX",r,s.offsetX),offsetY:Y(s.primitiveName,t,"OffsetY",r,s.offsetY)}),!0}function N(e,t,i,r,o,a,s){const l=e.primitiveName,f=e.size,m=e.scaleX,h=e.rotation,u=e.offsetX,d=e.offsetY,y=Object(c.e)(e.tintColor),g=Object(n.b)(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString();let p=!1,b="";for(const n of i)n.primitiveName===l&&(void 0!==n.value?b+=`-${n.primitiveName}-${n.propertyName}-${JSON.stringify(n.value)}`:n.valueExpressionInfo&&(p=!0));o.push({type:"marker",templateHash:Object(n.b)(JSON.stringify(e)+b).toString(),materialHash:p?()=>g:g,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:!1,alignment:a,size:Y(l,t,"Size",r,f),scaleX:Y(l,t,"ScaleX",r,m),rotation:Y(l,t,"Rotation",r,h),offsetX:Y(l,t,"OffsetX",r,u),offsetY:Y(l,t,"OffsetY",r,d),color:Y(l,t,"TintColor",r,y,_),anchorPoint:e.anchorPoint,isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:e.rotateClockwise,referenceSize:s,sizeRatio:1,markerPlacement:e.markerPlacement})}function L(e,t,i,r,n,o,a,s){const l=e.markerGraphics;if(!l)return;let c=0;if(e.scaleSymbolsProportionally){const t=e.frame;t&&(c=t.ymax-t.ymin)}for(const f of l)if(f){const l=f.symbol;if(!l)continue;switch(l.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":H(e,f,i,t,r,n,o,a,c,s);break;case"CIMTextSymbol":R(e,f,t,i,r,n,o,a,c)}}}function R(e,t,i,r,o,a,s,l,f){m.b.findApplicableOverrides(t,r,[]);const h=t.geometry;if(!("x"in h)||!("y"in h))return;const u=t.symbol,d=(b=u).underline?"underline":b.strikethrough?"line-through":"none",y=function(e){let t="normal",i="normal";if(e){const r=e.toLowerCase();-1!==r.indexOf("italic")?t="italic":-1!==r.indexOf("oblique")&&(t="oblique"),-1!==r.indexOf("bold")?i="bold":-1!==r.indexOf("light")&&(i="lighter")}return{style:t,weight:i}}(u.fontStyleName);var b;u.font={family:u.fontFamilyName,decoration:d,...y};const O=e.frame,S=e.size/f,x=e.primitiveName,v=(u.height||0)*S,M=u.angle||0,C=((u.offsetX||0)+(h.x-.5*(O.xmin+O.xmax)))*S,k=((u.offsetY||0)+(h.y-.5*(O.ymin+O.ymax)))*S,P=Object(c.e)(m.a.getFillColor(u));let w=Object(c.e)(m.a.getStrokeColor(u)),z=m.a.getStrokeWidth(u);z||(w=Object(c.e)(m.a.getFillColor(u.haloSymbol)),z=u.haloSize*S);let I="";for(const n of r)n.primitiveName===x&&void 0!==n.value&&(I+=`-${n.primitiveName}-${n.propertyName}-${JSON.stringify(n.value)}`);const j=JSON.stringify(e.effects)+Number(e.colorLocked)+JSON.stringify(e.anchorPoint)+e.anchorPointUnits+JSON.stringify(e.markerPlacement),N=Object(n.b)(JSON.stringify(t)+j+I).toString();a.push({type:"text",templateHash:N,materialHash:()=>Object(n.b)(JSON.stringify(u.font)).toString(),cim:u,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,alignment:s,anchorPoint:{x:e.anchorPoint?e.anchorPoint.x:0,y:e.anchorPoint?e.anchorPoint.y:0},isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,fontName:u.fontFamilyName,decoration:"none",weight:"normal",style:"normal",size:Y(x,i,"Size",o,v),angle:Y(x,i,"Rotation",o,M),offsetX:Y(x,i,"OffsetX",o,C),offsetY:Y(x,i,"OffsetY",o,k),horizontalAlignment:g(u.horizontalAlignment),verticalAlignment:p(u.verticalAlignment),text:Y(t.primitiveName,i,"TextString",o,t.textString,c.a,u.textCase),color:P,outlineColor:w,outlineSize:z,referenceSize:l,sizeRatio:1,markerPlacement:e.markerPlacement})}function H(e,t,i,r,o,a,s,l,f,u){const d=t.geometry;if(!d)return;const y=t.symbol.symbolLayers;if(!y)return;if(u)return void X(e,t,r,i,o,a,s,l,f);let g=y.length;for(;g--;){const u=y[g];if(u&&!1!==u.enable)switch(u.type){case"CIMSolidFill":case"CIMSolidStroke":{const y=Object(h.b)(d);if(!y)continue;const[g,p,b]=Object(h.d)(y,e.frame,e.size,e.anchorPoint,"Relative"!==e.anchorPointUnits),O="CIMSolidFill"===u.type,S={type:"sdf",geom:d,asFill:O},x=e.primitiveName,v=e.size,M=e.rotation||0,C=e.offsetX,k=e.offsetY,P=u.primitiveName,w=Object(c.e)(O?m.a.getFillColor(u):m.a.getStrokeColor(u)),z=O?{r:0,g:0,b:0,a:0}:Object(c.e)(m.a.getStrokeColor(u)),I=m.a.getStrokeWidth(u);if(!O&&!I)break;let j=!1,N="";for(const e of i)e.primitiveName!==P&&e.primitiveName!==x||(void 0!==e.value?N+=`-${e.primitiveName}-${e.propertyName}-${JSON.stringify(e.value)}`:e.valueExpressionInfo&&(j=!0));const L=JSON.stringify({...e,markerGraphics:null}),R=Object(n.b)(JSON.stringify(S)).toString(),H={type:"marker",templateHash:Object(n.b)(JSON.stringify(t)+JSON.stringify(u)+L+N).toString(),materialHash:j?()=>R:R,cim:S,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:s,anchorPoint:{x:p,y:b},isAbsoluteAnchorPoint:!1,size:Y(e.primitiveName,r,"Size",o,v),rotation:Y(e.primitiveName,r,"Rotation",o,M),offsetX:Y(e.primitiveName,r,"OffsetX",o,C),offsetY:Y(e.primitiveName,r,"OffsetY",o,k),scaleX:1,frameHeight:f,rotateClockwise:e.rotateClockwise,referenceSize:l,sizeRatio:g,color:Y(P,r,"Color",o,w,_),outlineColor:Y(P,r,"Color",o,z,_),outlineWidth:Y(P,r,"Width",o,I),markerPlacement:e.markerPlacement};a.push(H);break}default:X(e,t,r,i,o,a,s,l,f)}}}function X(e,t,i,r,o,a,s,c,f){const h=function(e,t){return{type:e.type,enable:!0,name:e.name,colorLocked:e.colorLocked,primitiveName:e.primitiveName,anchorPoint:e.anchorPoint,anchorPointUnits:e.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:e.rotateClockwise,rotation:0,size:e.size,billboardMode3D:e.billboardMode3D,depth3D:e.depth3D,frame:e.frame,markerGraphics:[t],scaleSymbolsProportionally:e.scaleSymbolsProportionally,respectFrame:e.respectFrame,clippingPath:e.clippingPath,effects:e.effects}}(e,t);let u=[];const d=["Rotation","OffsetX","OffsetY"];u=r.filter(t=>t.primitiveName!==e.primitiveName||-1===d.indexOf(t.propertyName));let y="";for(const n of r)void 0!==n.value&&(y+=`-${n.primitiveName}-${n.propertyName}-${JSON.stringify(n.value)}`);const[g,p,b]=m.a.getTextureAnchor(h),O=e.primitiveName,S=e.rotation||0,x=e.offsetX||0,v=e.offsetY||0,M=Object(n.b)(JSON.stringify(h)+y).toString(),C={type:"marker",templateHash:M,materialHash:0===u.length?M:F(M,i,u,o),cim:h,materialOverrides:u,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:s,anchorPoint:{x:g,y:p},isAbsoluteAnchorPoint:!1,size:e.size,rotation:Y(O,i,"Rotation",o,S),offsetX:Y(O,i,"OffsetX",o,x),offsetY:Y(O,i,"OffsetY",o,v),color:{r:0,g:0,b:0,a:0},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:f,rotateClockwise:e.rotateClockwise,referenceSize:c,sizeRatio:b/Object(l.d)(e.size),markerPlacement:e.markerPlacement};a.push(C)}function A(e){if(e&&0===e.indexOf("Level_")){const t=parseInt(e.substr(6),10);if(NaN!==t)return t}return 0}function _(e){if(!e||0===e.length)return null;const t=new s.a(e).toRgba();return{r:t[0],g:t[1],b:t[2],a:t[3]}}function Y(e,t,i,r,n,o,s){const l=t[e];if(l){const e=l[i];if("string"==typeof e||"number"==typeof e||e instanceof Array)return o?o.call(null,e,s):e;if(null!=e&&e instanceof a.a)return(t,i,a)=>{let l=Object(f.a)(e,t,{$view:a},r.geometryType,i);return null!==l&&o&&(l=o.call(null,l,s)),null!==l?l:n}}return n}function F(e,t,i,r){for(const n of i)if(n.valueExpressionInfo){const e=t[n.primitiveName]&&t[n.primitiveName][n.propertyName];e instanceof a.a&&(n.fn=(t,i,n)=>Object(f.a)(e,t,{$view:n},r.geometryType,i))}return(t,r,o)=>{for(const e of i)e.fn&&(e.value=e.fn(t,r,o));return Object(n.b)(e+m.b.buildOverrideKey(i)).toString()}}function T(e,t){if(!t||0===t.length)return e;const i=JSON.parse(JSON.stringify(e));return m.b.applyOverrides(i,t),i}},ictz:function(e,t,i){"use strict";var r=i("6S2I"),n=i("zlDU"),o=i("AIxD");const a=new Map;function s(e,t,i){const{transform:s,hasZ:l,hasM:c}=i;a.has(t)||a.set(t,function(e){const t={};switch(e){case"esriGeometryPoint":return(e,i,r,n)=>Object(o.e)(i,t,e,r,n);case"esriGeometryPolygon":return(e,i,r,n)=>Object(o.f)(i,t,e,r,n);case"esriGeometryPolyline":return(e,i,r,n)=>Object(o.g)(i,t,e,r,n);case"esriGeometryMultipoint":return(e,i,r,n)=>Object(o.d)(i,t,e,r,n);default:return r.a.getLogger("esri.views.2d.support.arcadeOnDemand").error(new n.a("mapview-arcade",`Unable to handle geometryType: ${e}`)),e=>e}}(t));const f=a.get(t)(e.geometry,s,l,c);return{...e,geometry:f}}t.a=function(e,t,i,n,o){const a=e.referencesGeometry()&&o?s(t,n,o):t,l=e.repurposeFeature(a);try{return e.evaluate({...i,$feature:l})}catch(c){return r.a.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",c),null}}}}]);