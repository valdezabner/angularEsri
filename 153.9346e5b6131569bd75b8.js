(window.webpackJsonp=window.webpackJsonp||[]).push([[153],{zKxS:function(e,t,n){"use strict";n.r(t),n.d(t,"createLabelFunction",function(){return y}),n.d(t,"formatField",function(){return m});var r=n("HaE+"),a=n("6S2I"),u=n("zlDU"),l=n("gvqN"),i=n("wdpY"),s=n("RlM3"),o=n("IeLS"),c=n("gLc9"),p=n("ezna");const d=a.a.getLogger("esri.layers.support.labelFormatUtils"),b={type:"simple",evaluate:()=>null},f={getAttribute:(e,t)=>e.field(t)};function y(e,t,n){return g.apply(this,arguments)}function g(){return(g=Object(r.a)(function*(e,t,r){if(!e||!e.symbol)return b;const a=e.where,s=Object(p.b)(e),o=a?yield n.e(7).then(n.bind(null,"ZqIb")):null;let y;if("arcade"===s.type){const e=yield Object(l.c)(s.expression,r,t);y={type:"arcade",evaluate(n){try{const t=e.evaluate({$feature:"attributes"in n?e.repurposeFeature(n):e.repurposeAdapter(n)});if(null!=t)return t.toString()}catch(t){d.error(new u.a("bad-arcade-expression","Encountered an error when evaluating label expression for feature",{feature:n,expression:s}))}return null},needsHydrationToEvaluate:()=>null==Object(p.e)(s.expression)}}else y={type:"simple",evaluate:e=>s.expression.replace(/{[^}]*}/g,n=>{const r=n.slice(1,-1),a=Object(i.n)(t,r);if(!a)return n;let u=null;return"attributes"in e?e&&e.attributes&&(u=e.attributes[a.name]):u=e.field(a.name),null==u?"":m(u,a)})};if(a){let e;try{e=o.WhereClause.create(a,new c.a(t))}catch(g){return b}const n=y.evaluate;y.evaluate=t=>e.testFeature(t,"attributes"in t?void 0:f)?n(t):null}return y})).apply(this,arguments)}function m(e,t){if(null==e)return"";const n=t.domain;if(n)if("codedValue"===n.type||"coded-value"===n.type){const t=e;for(const e of n.codedValues)if(e.code===t)return e.name}else if("range"===n.type){const t=+e,r="range"in n?n.range[1]:n.maxValue;if(("range"in n?n.range[0]:n.minValue)<=t&&t<=r)return n.name}let r=e;return"date"===t.type||"esriFieldTypeDate"===t.type?r=Object(s.b)(r,Object(s.a)("short-date")):Object(i.q)(t)&&(r=Object(o.b)(+r)),r||""}}}]);